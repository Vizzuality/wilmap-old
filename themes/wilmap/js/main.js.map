{"version":3,"sources":["main.js"],"names":["getAbsolutePath","loc","window","location","pathName","pathname","substring","lastIndexOf","href","length","search","hash","$","changeMenuOption","option","addClass","Drupal","behaviors","myBehavior","attach","context","settings","nodeid","path","currentPath","split","pop","select2","placeholder","allowClear","minimumResultsForSearch","Infinity","theme","click","css","setTimeout","removeClass","keypress","value","val","ajax","url","method","headers","Accept","success","data","status","xhr","find","gallerytopics","document","querySelector","i","contentbox","field_name_topic","field_definition_topic","append","gallerynews","dataValue","field_category","title","field_date_published","field_summary","indexOf","nid","html","field_title","jQuery"],"mappings":";;AAAA,SAASA,eAAT,GAA2B;AACzB,MAAMC,MAAMC,OAAOC,QAAnB;AACA,MAAMC,WAAWH,IAAII,QAAJ,CAAaC,SAAb,CAAuB,CAAvB,EAA0BL,IAAII,QAAJ,CAAaE,WAAb,CAAyB,GAAzB,IAAgC,CAA1D,CAAjB;AACA,SAAON,IAAIO,IAAJ,CAASF,SAAT,CAAmB,CAAnB,EAAsBL,IAAIO,IAAJ,CAASC,MAAT,IAAmB,CAACR,IAAII,QAAJ,GAAeJ,IAAIS,MAAnB,GAA4BT,IAAIU,IAAjC,EAAuCF,MAAvC,GAAgDL,SAASK,MAA5E,CAAtB,CAAP;AACD;;AAEA,WAAUG,CAAV,EAAa;AACZ,WAASC,gBAAT,CAA0BC,MAA1B,EAAkC;AAChCF,YAAME,MAAN,cAAuBC,QAAvB,CAAgC,WAAhC,EADgC,CACc;AAC/C;AACDC,SAAOC,SAAP,CAAiBC,UAAjB,GAA8B;AAC5BC,YAAQ,gBAAUC,OAAV,EAAmBC,QAAnB,EAA6B;AACnC,UAAMC,SAASD,SAASE,IAAT,CAAcC,WAAd,CAA0BC,KAA1B,CAAgC,GAAhC,EAAqCC,GAArC,EAAf;AACA;AACA;AACA;AACA,UAAMH,OAAOvB,iBAAb;;AAEAY,QAAE,kBAAF,EAAsBe,OAAtB,CAA8B;AAC5BC,qBAAa,eADe;AAE5BC,oBAAY,IAFgB;AAG5BC,iCAAyBC,QAHG;AAI5BC,eAAO;AAJqB,OAA9B;;AAOApB,QAAE,iBAAF,EAAqBe,OAArB,CAA6B;AAC3BC,qBAAa,SADc;AAE3BC,oBAAY,IAFe;AAG3BC,iCAAyBC,QAHE;AAI3BC,eAAO;AAJoB,OAA7B;;AAOApB,QAAE,cAAF,EAAkBe,OAAlB,CAA0B;AACxBC,qBAAa,MADW;AAExBC,oBAAY,IAFY;AAGxBC,iCAAyBC,QAHD;AAIxBC,eAAO;AAJiB,OAA1B;;AAOApB,QAAE,eAAF,EAAmBe,OAAnB,CAA2B;AACzBC,qBAAa,SADY;AAEzBC,oBAAY,IAFa;AAGzBC,iCAAyBC,QAHA;AAIzBC,eAAO;AAJkB,OAA3B;;AAOApB,QAAE,cAAF,EAAkBe,OAAlB,CAA0B;AACxBC,qBAAa,cADW;AAExBC,oBAAY,IAFY;AAGxBC,iCAAyBC,QAHD;AAIxBC,eAAO;AAJiB,OAA1B;;AAOApB,QAAE,aAAF,EAAiBqB,KAAjB,CAAuB,YAAU;AAC/BrB,UAAE,eAAF,EAAmBsB,GAAnB,CAAuB,SAAvB,EAAkC,OAAlC;AACAtB,UAAE,cAAF,EAAkBsB,GAAlB,CAAsB,SAAtB,EAAiC,OAAjC;AACAC,mBAAW,YAAU;AACnBvB,YAAE,eAAF,EAAmBG,QAAnB,CAA4B,UAA5B;AACAH,YAAE,cAAF,EAAkBG,QAAlB,CAA2B,UAA3B;AACD,SAHD,EAGG,EAHH;AAID,OAPD;;AASAH,QAAE,cAAF,EAAkBqB,KAAlB,CAAwB,YAAU;AAChCrB,UAAE,eAAF,EAAmBwB,WAAnB,CAA+B,UAA/B;AACAxB,UAAE,cAAF,EAAkBwB,WAAlB,CAA8B,UAA9B;AACAD,mBAAW,YAAU;AACnBvB,YAAE,eAAF,EAAmBsB,GAAnB,CAAuB,SAAvB,EAAkC,MAAlC;AACAtB,YAAE,cAAF,EAAkBsB,GAAlB,CAAsB,SAAtB,EAAiC,MAAjC;AACD,SAHD,EAGG,GAHH;AAID,OAPD;;AASAtB,QAAE,aAAF,EAAiByB,QAAjB,CAA0B,YAAW;AACnC,YAAMC,QAAQ1B,EAAE,aAAF,EAAiB2B,GAAjB,EAAd;AACA3B,UAAE4B,IAAF,CAAO;AACLC,eAAQlB,IAAR,mBADK;AAELmB,kBAAQ,KAFH;AAGLC,mBAAS;AACPC,oBAAQ,kBADD;AAEP,4BAAgB;AAFT,WAHJ;AAOLC,mBAAS,iBAASC,IAAT,EAAeC,MAAf,EAAuBC,GAAvB,EAA4B;AACnC;AACD;AATI,SAAP;AAWD,OAbD;;AAeA;AACA;AACA;;AAEA,UAAIpC,EAAEQ,OAAF,EAAW6B,IAAX,CAAgB,cAAhB,EAAgCxC,MAAhC,KAA2C,CAA/C,EAAkD;AAAA;AAChD,cAAMyC,gBAAgBC,SAASC,aAAT,CAAuB,iBAAvB,CAAtB;AACAxC,YAAE4B,IAAF,CAAO;AACLC,iBAAQlB,IAAR,mBADK;AAELmB,oBAAQ,KAFH;AAGLC,qBAAS;AACPC,sBAAQ,kBADD;AAEP,8BAAgB;AAFT,aAHJ;AAOLC,qBAAS,iBAASC,IAAT,EAAeC,MAAf,EAAuBC,GAAvB,EAA4B;AACnC,mBAAK,IAAIK,IAAI,CAAb,EAAgBA,IAAIP,KAAKrC,MAAzB,EAAiC4C,GAAjC,EAAsC;AACpC,oBAAMC,aAAa,8CAA8CR,KAAKO,CAAL,EAAQE,gBAAtD,GAAyE,OAAzE,GACnB,6BADmB,GACaT,KAAKO,CAAL,EAAQG,sBADrB,GAC8C,kBADjE;AAEA5C,kBAAEsC,aAAF,EAAiBO,MAAjB,CAAwBH,UAAxB;AACD;AACF;AAbI,WAAP;AAFgD;AAiBjD;;AAED;AACA;AACA;;AAEA,UAAI1C,EAAEQ,OAAF,EAAW6B,IAAX,CAAgB,YAAhB,EAA8BxC,MAA9B,KAAyC,CAA7C,EAAgD;AAC9C,YAAIiD,cAAcP,SAASC,aAAT,CAAuB,iBAAvB,CAAlB;;AAGAxC,UAAE,kBAAF,EAAsBqB,KAAtB,CAA4B,YAAU;AACpCrB,YAAE,kBAAF,EAAsBwB,WAAtB,CAAkC,WAAlC;AACA,cAAMuB,YAAY/C,EAAE,IAAF,EAAQkC,IAAR,CAAa,KAAb,CAAlB;AACAlC,YAAE,YAAF,EAAgBsB,GAAhB,CAAoB,KAApB,EAA2ByB,YAAU,IAArC;AACA/C,YAAE,IAAF,EAAQG,QAAR,CAAiB,WAAjB;AACD,SALD;;AAOAH,UAAE4B,IAAF,CAAO;AACLC,eAAQlB,IAAR,iBADK;AAELmB,kBAAQ,KAFH;AAGLC,mBAAS;AACPC,oBAAQ,kBADD;AAEP,4BAAgB;AAFT,WAHJ;AAOLC,mBAAS,iBAASC,IAAT,EAAeC,MAAf,EAAuBC,GAAvB,EAA4B;AACnC,iBAAK,IAAIK,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA2B;AACzB,kBAAMC,aAAa,yBAAyBR,KAAKO,CAAL,EAAQO,cAAjC,GAAkD,0BAAlD,GAA+Ed,KAAKO,CAAL,EAAQQ,KAAvF,GACnB,0BADmB,GACUf,KAAKO,CAAL,EAAQS,oBADlB,GAEnB,2BAFmB,GAEWhB,KAAKO,CAAL,EAAQU,aAFnB,GAGnB,uCAHmB,GAGuBjB,KAAKO,CAAL,EAAQ9B,IAH/B,GAGsC,uBAHzD;AAIAX,gBAAE8C,WAAF,EAAeD,MAAf,CAAsBH,UAAtB;AACD;AACF;AAfI,SAAP;AAiBD;AACD,UAAI1C,EAAEQ,OAAF,EAAW6B,IAAX,CAAgB,aAAhB,EAA+BxC,MAA/B,KAA0C,CAA9C,EAAiD;AAC/C;AACA;AACA;AACA,YAAIc,KAAKyC,OAAL,CAAa,QAAb,MAA2B,CAAC,CAAhC,EAAmC;AACjCpD,YAAE,aAAF,EAAiBG,QAAjB,CAA0B,kBAA1B;AACAF,2BAAiB,MAAjB;AACAD,YAAE4B,IAAF,CAAO;AACLC,iBAAK,eADA;AAELC,oBAAQ,KAFH;AAGLC,qBAAS;AACPC,sBAAQ,kBADD;AAEP,8BAAgB;AAFT,aAHJ;AAOLC,qBAAS,iBAASC,IAAT,EAAeC,MAAf,EAAuBC,GAAvB,EAA4B;AACnC,mBAAK,IAAIK,IAAI,CAAb,EAAgBA,IAAIP,KAAKrC,MAAzB,EAAiC4C,GAAjC,EAAqC;AACnC,oBAAI/B,WAAWwB,KAAKO,CAAL,EAAQY,GAAvB,EAA4B;AAC1BrD,oBAAE,aAAF,EAAiBsD,IAAjB,CAAsBpB,KAAKO,CAAL,EAAQc,WAA9B;AACAvD,oBAAE,YAAF,EAAgBsD,IAAhB,CAAqBpB,KAAKO,CAAL,EAAQS,oBAA7B;AACAlD,oBAAE,eAAF,EAAmB6C,MAAnB,CAA0BX,KAAKO,CAAL,EAAQU,aAAlC;AACD;AACF;AACF;AAfI,WAAP;AAiBD;AACF,OAzBD,MAyBO;AACLlD,yBAAiBQ,SAASE,IAAT,CAAcC,WAA/B;AACD;AACF;AAhK2B,GAA9B;AAkKD,CAtKA,EAsKC4C,MAtKD,CAAD","file":"main.js","sourcesContent":["function getAbsolutePath() {\n  const loc = window.location;\n  const pathName = loc.pathname.substring(0, loc.pathname.lastIndexOf('/') + 1);\n  return loc.href.substring(0, loc.href.length - ((loc.pathname + loc.search + loc.hash).length - pathName.length));\n}\n\n(function ($) {\n  function changeMenuOption(option) {\n    $(`.${option}-option`).addClass('-selected'); // `Hello, ${name}!`;\n  }\n  Drupal.behaviors.myBehavior = {\n    attach: function (context, settings) {\n      const nodeid = settings.path.currentPath.split('/').pop();\n      // console.log(nodeid)\n      // console.log(context)\n      // console.log(settings.path.currentPath);\n      const path = getAbsolutePath();\n\n      $('.filter-document').select2({\n        placeholder: 'Document Type',\n        allowClear: true,\n        minimumResultsForSearch: Infinity,\n        theme: 'wilmap-select-document'\n      });\n\n      $('.filter-country').select2({\n        placeholder: 'Country',\n        allowClear: true,\n        minimumResultsForSearch: Infinity,\n        theme: 'wilmap-select-country'\n      });\n\n      $('.filter-year').select2({\n        placeholder: 'Year',\n        allowClear: true,\n        minimumResultsForSearch: Infinity,\n        theme: 'wilmap-select-year'\n      });\n\n      $('.filter-group').select2({\n        placeholder: 'Nothing',\n        allowClear: true,\n        minimumResultsForSearch: Infinity,\n        theme: 'wilmap-select-year'\n      });\n\n      $('.filter-sort').select2({\n        placeholder: 'Newest firts',\n        allowClear: true,\n        minimumResultsForSearch: Infinity,\n        theme: 'wilmap-select-year'\n      });\n\n      $('.search-box').click(function(){\n        $('.search-modal').css('display', 'block');\n        $('.search-back').css('display', 'block');\n        setTimeout(function(){\n          $('.search-modal').addClass('-visible');\n          $('.search-back').addClass('-visible');\n        }, 10);\n      });\n\n      $('.search-back').click(function(){\n        $('.search-modal').removeClass('-visible');\n        $('.search-back').removeClass('-visible');\n        setTimeout(function(){\n          $('.search-modal').css('display', 'none');\n          $('.search-back').css('display', 'none');\n        }, 201);\n      });\n\n      $('.search-box').keypress(function() {\n        const value = $('.search-box').val();\n        $.ajax({\n          url: `${path}api/topicsJSON`,\n          method: 'GET',\n          headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/hal+json'\n          },\n          success: function(data, status, xhr) {\n            // here the magic\n          }\n        });\n      });\n\n      // *******************************************************\n      // FUNCTIONS FOR GALLERY TOPICS PAGE\n      // *******************************************************\n\n      if ($(context).find('.topics-page').length !== 0) {\n        const gallerytopics = document.querySelector('.gallery-topics');\n        $.ajax({\n          url: `${path}api/topicsJSON`,\n          method: 'GET',\n          headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/hal+json'\n          },\n          success: function(data, status, xhr) {\n            for (let i = 0; i < data.length; i++) {\n              const contentbox = '<a href=\"#\" class=\"info-topics\"><div><h3>' + data[i].field_name_topic + '</h3>' +\n              '<hr><div class=\"paragraph\">' + data[i].field_definition_topic + '</div></div></a>';\n              $(gallerytopics).append(contentbox);\n            }\n          }\n        });\n      }\n\n      // *******************************************************\n      // FUNCTIONS FOR GALLERY NEWS PAGE\n      // *******************************************************\n\n      if ($(context).find('.news-page').length !== 0) {\n        var gallerynews = document.querySelector(\".gallery-scroll\");\n\n\n        $('.option-category').click(function(){\n          $('.option-category').removeClass('-selected');\n          const dataValue = $(this).data('bar');\n          $('.small-bar').css('top', dataValue+'px');\n          $(this).addClass('-selected');\n        });\n\n        $.ajax({\n          url: `${path}api/newsJSON`,\n          method: 'GET',\n          headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/hal+json'\n          },\n          success: function(data, status, xhr) {\n            for (let i = 0; i < 3; i++){\n              const contentbox = '<div data-category=\"' + data[i].field_category + '\" class=\"info-news\"><h2>' + data[i].title +\n              '</h2><span class=\"date\">' + data[i].field_date_published +\n              '</span><div class=\"text\">' + data[i].field_summary +\n              '</div><a class=\"butn -primary\" href=\"' + data[i].path + '\">read more</a></div>';\n              $(gallerynews).append(contentbox);\n            }\n          }\n        });\n      }\n      if ($(context).find('.node-pages').length !== 0) {\n        // *******************************************************\n        // FUNCTIONS FOR NEWS DETAIL PAGE\n        // *******************************************************\n        if (path.indexOf('/news/') !== -1) {\n          $('.node-pages').addClass('news-detail-page');\n          changeMenuOption('news');\n          $.ajax({\n            url: '/api/newsJSON',\n            method: 'GET',\n            headers: {\n              Accept: 'application/json',\n              'Content-Type': 'application/hal+json'\n            },\n            success: function(data, status, xhr) {\n              for (let i = 0; i < data.length; i++){\n                if (nodeid === data[i].nid) {\n                  $('.title-node').html(data[i].field_title);\n                  $('.date-node').html(data[i].field_date_published);\n                  $('.content-node').append(data[i].field_summary);\n                }\n              }\n            }\n          });\n        }\n      } else {\n        changeMenuOption(settings.path.currentPath);\n      }\n    }\n  };\n}(jQuery));\n"]}