{"version":3,"sources":["main.js"],"names":["getAbsolutePath","loc","window","location","pathName","pathname","substring","lastIndexOf","href","length","search","hash","changeMenuOption","option","document","querySelector","classList","add","$","Drupal","behaviors","myBehavior","attach","drupal","context","settings","path","nodeid","currentPath","split","pop","click","css","setTimeout","addClass","removeClass","keypress","ajax","url","method","headers","Accept","success","searchTerm","data","status","xhr","select2","placeholder","allowClear","minimumResultsForSearch","Infinity","theme","gallerytopics","showTopics","i","contentbox","field_name_topic","field_definition_topic","append","gallerynews","clickCategory","dataValue","showNews","field_category","title","field_date_published","field_summary","find","indexOf","showDetail","nid","html","field_title","jQuery"],"mappings":";;AAAA,SAASA,eAAT,GAA2B;AACzB,MAAMC,MAAMC,OAAOC,QAAnB;AACA,MAAMC,WAAWH,IAAII,QAAJ,CAAaC,SAAb,CAAuB,CAAvB,EAA0BL,IAAII,QAAJ,CAAaE,WAAb,CAAyB,GAAzB,IAAgC,CAA1D,CAAjB;AACA,SAAON,IAAIO,IAAJ,CAASF,SAAT,CAAmB,CAAnB,EAAsBL,IAAIO,IAAJ,CAASC,MAAT,IAC5B,CAACR,IAAII,QAAJ,GAAeJ,IAAIS,MAAnB,GAA4BT,IAAIU,IAAjC,EAAuCF,MAAvC,GAAgDL,SAASK,MAD7B,CAAtB,CAAP;AAED;;AAED,SAASG,gBAAT,CAA0BC,MAA1B,EAAkC;AAChCC,WAASC,aAAT,OAA2BF,MAA3B,cAA4CG,SAA5C,CAAsDC,GAAtD,CAA0D,WAA1D;AACD;;AAEA,WAAUC,CAAV,EAAa;AACZC,SAAOC,SAAP,CAAiBC,UAAjB,GAA8B;AAC5BC,YAAQ,SAASC,MAAT,CAAgBC,OAAhB,EAAyBC,QAAzB,EAAmC;AACzC,UAAMC,OAAO1B,iBAAb;AACA,UAAM2B,SAASF,SAASC,IAAT,CAAcE,WAAd,CAA0BC,KAA1B,CAAgC,GAAhC,EAAqCC,GAArC,EAAf;AACA;AACA;AACA;;AAEAZ,QAAE,aAAF,EAAiBa,KAAjB,CAAuB,YAAU;AAC/Bb,UAAE,eAAF,EAAmBc,GAAnB,CAAuB,SAAvB,EAAkC,OAAlC;AACAd,UAAE,cAAF,EAAkBc,GAAlB,CAAsB,SAAtB,EAAiC,OAAjC;AACAC,mBAAW,YAAU;AACnBf,YAAE,eAAF,EAAmBgB,QAAnB,CAA4B,UAA5B;AACAhB,YAAE,cAAF,EAAkBgB,QAAlB,CAA2B,UAA3B;AACD,SAHD,EAGG,EAHH;AAID,OAPD;;AASAhB,QAAE,cAAF,EAAkBa,KAAlB,CAAwB,YAAU;AAChCb,UAAE,eAAF,EAAmBiB,WAAnB,CAA+B,UAA/B;AACAjB,UAAE,cAAF,EAAkBiB,WAAlB,CAA8B,UAA9B;AACAF,mBAAW,YAAU;AACnBf,YAAE,eAAF,EAAmBc,GAAnB,CAAuB,SAAvB,EAAkC,MAAlC;AACAd,YAAE,cAAF,EAAkBc,GAAlB,CAAsB,SAAtB,EAAiC,MAAjC;AACD,SAHD,EAGG,GAHH;AAID,OAPD;;AASAd,QAAE,aAAF,EAAiBkB,QAAjB,CAA0B,YAAW;AACnC;AACAlB,UAAEmB,IAAF,CAAO;AACLC,eAAQZ,IAAR,mBADK;AAELa,kBAAQ,KAFH;AAGLC,mBAAS;AACPC,oBAAQ,kBADD;AAEP,4BAAgB;AAFT,WAHJ;AAOLC,mBAAS,SAASC,UAAT,CAAoBC,IAApB,EAA0BC,MAA1B,EAAkCC,GAAlC,EAAuC;AAC9C;AACD;AATI,SAAP;AAWD,OAbD;;AAeA;AACA;AACA;AACA,UAAIrB,SAASC,IAAT,CAAcE,WAAd,KAA8B,SAAlC,EAA6C;AAC3CV,UAAE,kBAAF,EAAsB6B,OAAtB,CAA8B;AAC5BC,uBAAa,eADe;AAE5BC,sBAAY,IAFgB;AAG5BC,mCAAyBC,QAHG;AAI5BC,iBAAO;AAJqB,SAA9B;AAMAlC,UAAE,iBAAF,EAAqB6B,OAArB,CAA6B;AAC3BC,uBAAa,SADc;AAE3BC,sBAAY,IAFe;AAG3BC,mCAAyBC,QAHE;AAI3BC,iBAAO;AAJoB,SAA7B;;AAOAlC,UAAE,cAAF,EAAkB6B,OAAlB,CAA0B;AACxBC,uBAAa,MADW;AAExBC,sBAAY,IAFY;AAGxBC,mCAAyBC,QAHD;AAIxBC,iBAAO;AAJiB,SAA1B;;AAOAlC,UAAE,eAAF,EAAmB6B,OAAnB,CAA2B;AACzBC,uBAAa,SADY;AAEzBC,sBAAY,IAFa;AAGzBC,mCAAyBC,QAHA;AAIzBC,iBAAO;AAJkB,SAA3B;;AAOAlC,UAAE,cAAF,EAAkB6B,OAAlB,CAA0B;AACxBC,uBAAa,cADW;AAExBC,sBAAY,IAFY;AAGxBC,mCAAyBC,QAHD;AAIxBC,iBAAO;AAJiB,SAA1B;AAMD;;AAED;AACA;AACA;AACA,UAAI3B,SAASC,IAAT,CAAcE,WAAd,KAA8B,QAAlC,EAA4C;AAAA;AAC1C,cAAMyB,gBAAgBvC,SAASC,aAAT,CAAuB,iBAAvB,CAAtB;AACAG,YAAEmB,IAAF,CAAO;AACLC,iBAAQZ,IAAR,mBADK;AAELa,oBAAQ,KAFH;AAGLC,qBAAS;AACPC,sBAAQ,kBADD;AAEP,8BAAgB;AAFT,aAHJ;AAOLC,qBAAS,SAASY,UAAT,CAAoBV,IAApB,EAA0BC,MAA1B,EAAkCC,GAAlC,EAAuC;AAC9C,mBAAK,IAAIS,IAAI,CAAb,EAAgBA,IAAIX,KAAKnC,MAAzB,EAAiC8C,KAAK,CAAtC,EAAyC;AACvC,oBAAMC,2DAAyDZ,KAAKW,CAAL,EAAQE,gBAAjE,wDACuBb,KAAKW,CAAL,EAAQG,sBAD/B,qBAAN;AAEAxC,kBAAEmC,aAAF,EAAiBM,MAAjB,CAAwBH,UAAxB;AACD;AACF;AAbI,WAAP;AAF0C;AAiB3C;;AAED;AACA;AACA;AACA,UAAI/B,SAASC,IAAT,CAAcE,WAAd,KAA8B,MAAlC,EAA0C;AAAA;AACxC,cAAMgC,cAAc9C,SAASC,aAAT,CAAuB,iBAAvB,CAApB;AACAG,YAAE,kBAAF,EAAsBa,KAAtB,CAA4B,SAAS8B,aAAT,GAAyB;AACnD3C,cAAE,kBAAF,EAAsBiB,WAAtB,CAAkC,WAAlC;AACA,gBAAM2B,YAAY5C,EAAE,IAAF,EAAQ0B,IAAR,CAAa,KAAb,CAAlB;AACA1B,cAAE,YAAF,EAAgBc,GAAhB,CAAoB,KAApB,EAA8B8B,SAA9B;AACA5C,cAAE,IAAF,EAAQgB,QAAR,CAAiB,WAAjB;AACD,WALD;;AAOAhB,YAAEmB,IAAF,CAAO;AACLC,iBAAQZ,IAAR,iBADK;AAELa,oBAAQ,KAFH;AAGLC,qBAAS;AACPC,sBAAQ,kBADD;AAEP,8BAAgB;AAFT,aAHJ;AAOLC,qBAAS,SAASqB,QAAT,CAAkBnB,IAAlB,EAAwBC,MAAxB,EAAgCC,GAAhC,EAAqC;AAC5C,mBAAK,IAAIS,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,KAAK,CAA5B,EAA+B;AAC7B,oBAAMC,sCAAoCZ,KAAKW,CAAL,EAAQS,cAA5C,gDACApB,KAAKW,CAAL,EAAQU,KADR,gDAEerB,KAAKW,CAAL,EAAQW,oBAFvB,iDAGctB,KAAKW,CAAL,EAAQY,aAHtB,6DAI2BvB,KAAKW,CAAL,EAAQ7B,IAJnC,0CAAN;AAMAR,kBAAE0C,WAAF,EAAeD,MAAf,CAAsBH,UAAtB;AACD;AACF;AAjBI,WAAP;AATwC;AA4BzC;;AAED;AACA;AACA;AACA,UAAItC,EAAEM,OAAF,EAAW4C,IAAX,CAAgB,aAAhB,EAA+B3D,MAA/B,KAA0C,CAA9C,EAAiD;AAC/C,YAAIiB,KAAK2C,OAAL,CAAa,QAAb,MAA2B,CAAC,CAAhC,EAAmC;AACjCnD,YAAE,aAAF,EAAiBgB,QAAjB,CAA0B,kBAA1B;AACAtB,2BAAiB,MAAjB;AACAM,YAAEmB,IAAF,CAAO;AACLC,iBAAK,eADA;AAELC,oBAAQ,KAFH;AAGLC,qBAAS;AACPC,sBAAQ,kBADD;AAEP,8BAAgB;AAFT,aAHJ;AAOLC,qBAAS,SAAS4B,UAAT,CAAoB1B,IAApB,EAA0BC,MAA1B,EAAkCC,GAAlC,EAAuC;AAC9C,mBAAK,IAAIS,IAAI,CAAb,EAAgBA,IAAIX,KAAKnC,MAAzB,EAAiC8C,KAAK,CAAtC,EAAyC;AACvC,oBAAI5B,WAAWiB,KAAKW,CAAL,EAAQgB,GAAvB,EAA4B;AAC1BrD,oBAAE,aAAF,EAAiBsD,IAAjB,CAAsB5B,KAAKW,CAAL,EAAQkB,WAA9B;AACAvD,oBAAE,YAAF,EAAgBsD,IAAhB,CAAqB5B,KAAKW,CAAL,EAAQW,oBAA7B;AACAhD,oBAAE,eAAF,EAAmByC,MAAnB,CAA0Bf,KAAKW,CAAL,EAAQY,aAAlC;AACD;AACF;AACF;AAfI,WAAP;AAiBD;AACF,OAtBD,MAsBO;AACLvD,yBAAiBa,SAASC,IAAT,CAAcE,WAA/B;AACD;AACF;AAnK2B,GAA9B;AAqKD,CAtKA,EAsKC8C,MAtKD,CAAD","file":"main.js","sourcesContent":["function getAbsolutePath() {\n  const loc = window.location;\n  const pathName = loc.pathname.substring(0, loc.pathname.lastIndexOf('/') + 1);\n  return loc.href.substring(0, loc.href.length -\n  ((loc.pathname + loc.search + loc.hash).length - pathName.length));\n}\n\nfunction changeMenuOption(option) {\n  document.querySelector(`.${option}-option`).classList.add('-selected');\n}\n\n(function ($) {\n  Drupal.behaviors.myBehavior = {\n    attach: function drupal(context, settings) {\n      const path = getAbsolutePath();\n      const nodeid = settings.path.currentPath.split('/').pop();\n      // *******************************************************\n      // FUNCTIONS FOR GALLERY ALL PAGES\n      // *******************************************************\n\n      $('.search-box').click(function(){\n        $('.search-modal').css('display', 'block');\n        $('.search-back').css('display', 'block');\n        setTimeout(function(){\n          $('.search-modal').addClass('-visible');\n          $('.search-back').addClass('-visible');\n        }, 10);\n      });\n\n      $('.search-back').click(function(){\n        $('.search-modal').removeClass('-visible');\n        $('.search-back').removeClass('-visible');\n        setTimeout(function(){\n          $('.search-modal').css('display', 'none');\n          $('.search-back').css('display', 'none');\n        }, 201);\n      });\n\n      $('.search-box').keypress(function() {\n        // const value = $('.search-box').val();\n        $.ajax({\n          url: `${path}api/topicsJSON`,\n          method: 'GET',\n          headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/hal+json'\n          },\n          success: function searchTerm(data, status, xhr) {\n            // here the magic\n          }\n        });\n      });\n\n      // *******************************************************\n      // FUNCTIONS FOR GALLERY EXPLORE PAGE\n      // *******************************************************\n      if (settings.path.currentPath === 'explore') {\n        $('.filter-document').select2({\n          placeholder: 'Document Type',\n          allowClear: true,\n          minimumResultsForSearch: Infinity,\n          theme: 'wilmap-select-document'\n        });\n        $('.filter-country').select2({\n          placeholder: 'Country',\n          allowClear: true,\n          minimumResultsForSearch: Infinity,\n          theme: 'wilmap-select-country'\n        });\n\n        $('.filter-year').select2({\n          placeholder: 'Year',\n          allowClear: true,\n          minimumResultsForSearch: Infinity,\n          theme: 'wilmap-select-year'\n        });\n\n        $('.filter-group').select2({\n          placeholder: 'Nothing',\n          allowClear: true,\n          minimumResultsForSearch: Infinity,\n          theme: 'wilmap-select-year'\n        });\n\n        $('.filter-sort').select2({\n          placeholder: 'Newest firts',\n          allowClear: true,\n          minimumResultsForSearch: Infinity,\n          theme: 'wilmap-select-year'\n        });\n      }\n\n      // *******************************************************\n      // FUNCTIONS FOR GALLERY TOPICS PAGE\n      // *******************************************************\n      if (settings.path.currentPath === 'topics') {\n        const gallerytopics = document.querySelector('.gallery-topics');\n        $.ajax({\n          url: `${path}api/topicsJSON`,\n          method: 'GET',\n          headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/hal+json'\n          },\n          success: function showTopics(data, status, xhr) {\n            for (let i = 0; i < data.length; i += 1) {\n              const contentbox = `<a href=\"#\" class=\"info-topics\"><div><h3>${data[i].field_name_topic}</h3>\n              <hr><div class=\"paragraph\">${data[i].field_definition_topic}</div></div></a>`;\n              $(gallerytopics).append(contentbox);\n            }\n          }\n        });\n      }\n\n      // *******************************************************\n      // FUNCTIONS FOR GALLERY NEWS PAGE\n      // *******************************************************\n      if (settings.path.currentPath === 'news') {\n        const gallerynews = document.querySelector('.gallery-scroll');\n        $('.option-category').click(function clickCategory() {\n          $('.option-category').removeClass('-selected');\n          const dataValue = $(this).data('bar');\n          $('.small-bar').css('top', `${dataValue}px`);\n          $(this).addClass('-selected');\n        });\n\n        $.ajax({\n          url: `${path}api/newsJSON`,\n          method: 'GET',\n          headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/hal+json'\n          },\n          success: function showNews(data, status, xhr) {\n            for (let i = 0; i < 3; i += 1) {\n              const contentbox = `<div data-category=\"${data[i].field_category}\" class=\"info-news\">\n              <h2>${data[i].title}</h2>\n              <span class=\"date\">${data[i].field_date_published}</span>\n              <div class=\"text\">${data[i].field_summary}</div>\n              <a class=\"butn -primary\" href=\"${data[i].path}\">read more</a>\n              </div>`;\n              $(gallerynews).append(contentbox);\n            }\n          }\n        });\n      }\n\n      // *******************************************************\n      // FUNCTIONS FOR NEWS DETAIL PAGE\n      // *******************************************************\n      if ($(context).find('.node-pages').length !== 0) {\n        if (path.indexOf('/news/') !== -1) {\n          $('.node-pages').addClass('news-detail-page');\n          changeMenuOption('news');\n          $.ajax({\n            url: '/api/newsJSON',\n            method: 'GET',\n            headers: {\n              Accept: 'application/json',\n              'Content-Type': 'application/hal+json'\n            },\n            success: function showDetail(data, status, xhr) {\n              for (let i = 0; i < data.length; i += 1) {\n                if (nodeid === data[i].nid) {\n                  $('.title-node').html(data[i].field_title);\n                  $('.date-node').html(data[i].field_date_published);\n                  $('.content-node').append(data[i].field_summary);\n                }\n              }\n            }\n          });\n        }\n      } else {\n        changeMenuOption(settings.path.currentPath);\n      }\n    }\n  };\n}(jQuery));\n"]}