"use strict";function getAbsolutePath(){var e=window.location,a=e.pathname.substring(0,e.pathname.lastIndexOf("/")+1);return e.href.substring(0,e.href.length-((e.pathname+e.search+e.hash).length-a.length))}function changeMenuOption(e){document.querySelector("."+e+"-option").classList.add("-selected")}!function(e){Drupal.behaviors.myBehavior={attach:function(a,t){var s=getAbsolutePath(),l=t.path.currentPath.split("/").pop();e(".search-box").click(function(){e(".search-modal").css("display","block"),e(".search-back").css("display","block"),setTimeout(function(){e(".search-modal").addClass("-visible"),e(".search-back").addClass("-visible")},10)}),e(".search-back").click(function(){e(".search-modal").removeClass("-visible"),e(".search-back").removeClass("-visible"),setTimeout(function(){e(".search-modal").css("display","none"),e(".search-back").css("display","none")},201)}),e(".search-box").keypress(function(){e.ajax({url:s+"api/topicsJSON",method:"GET",headers:{Accept:"application/json","Content-Type":"application/hal+json"},success:function(e,a,t){}})}),"explore"===t.path.currentPath&&(e(".filter-document").select2({placeholder:"Document Type",allowClear:!0,minimumResultsForSearch:1/0,theme:"wilmap-select-document"}),e(".filter-country").select2({placeholder:"Country",allowClear:!0,minimumResultsForSearch:1/0,theme:"wilmap-select-country"}),e(".filter-year").select2({placeholder:"Year",allowClear:!0,minimumResultsForSearch:1/0,theme:"wilmap-select-year"}),e(".filter-group").select2({placeholder:"Nothing",allowClear:!0,minimumResultsForSearch:1/0,theme:"wilmap-select-year"}),e(".filter-sort").select2({placeholder:"Newest firts",allowClear:!0,minimumResultsForSearch:1/0,theme:"wilmap-select-year"})),"topics"===t.path.currentPath&&!function(){var a=document.querySelector(".gallery-topics");e.ajax({url:s+"api/topicsJSON",method:"GET",headers:{Accept:"application/json","Content-Type":"application/hal+json"},success:function(t,s,l){for(var n=0;n<t.length;n+=1){var c='<a href="#" class="info-topics"><div><h3>'+t[n].field_name_topic+'</h3>\n              <hr><div class="paragraph">'+t[n].field_definition_topic+"</div></div></a>";e(a).append(c)}}})}(),"news"===t.path.currentPath&&!function(){var a=document.querySelector(".gallery-scroll");e(".option-category").click(function(){e(".option-category").removeClass("-selected");var a=e(this).data("bar");e(".small-bar").css("top",a+"px"),e(this).addClass("-selected")}),e.ajax({url:s+"api/newsJSON",method:"GET",headers:{Accept:"application/json","Content-Type":"application/hal+json"},success:function(t,s,l){console.log(t);for(var n=0;n<3;n+=1){var c='<div data-category="'+t[n].field_category+'" class="info-news">\n              <h2>'+t[n].title+'</h2>\n              <span class="date">'+t[n].field_date_published+'</span>\n              <div class="text">'+t[n].field_summary+'</div>\n              <a class="butn -primary" href="'+t[n].path+'">read more</a>\n              </div>';e(a).append(c)}}})}(),0!==e(a).find(".node-pages").length?s.indexOf("/news/")!==-1&&(e(".node-pages").addClass("news-detail-page"),changeMenuOption("news"),e.ajax({url:"/api/newsJSON",method:"GET",headers:{Accept:"application/json","Content-Type":"application/hal+json"},success:function(a,t,s){for(var n=0;n<a.length;n+=1)l===a[n].nid&&(e(".title-node").html(a[n].field_title),e(".date-node").html(a[n].field_date_published),e(".content-node").append(a[n].field_summary))}})):changeMenuOption(t.path.currentPath)}}}(jQuery);